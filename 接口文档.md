# 接口文档

### 1、User会员

##### 1.1 **获取用户列表**

```
请求类型: GET
请求地址: /api/user/list
请求参数: 无
返回参数: Result(data为user对象)
	{
    "code": 1,
    "data": [
        {
            "id": 1,
            "name": "张三",
            "username": "zhangsa",
            "age": 16,
            "sex": "男",
            "phone": "13543999546",
            "address": "北京市"
        },
        …………
    ],
    "msg": "success"
}
```



##### 1.2**获取分页用户列表**：

```
请求类型: POST
请求地址: /api/user/page
请求参数: json格式的 userPageRequest对象
		{
			"pageNum":1,
			"pageSize":10,
			"name":" ",
			"phone":" "
		}
返回参数: Result(records为user对象)
{
    "code": "200",
    "data": {
        "records": [
            {
                "id": 26,
                "name": "大米",
                "password": "123456",
                "userNo": "202407051228666849",
                "age": 25,
                "sex": "女",
                "phone": "12345666897",
                "email": "123@qq.com",
                "address": "呜呜呜呜呜呜呜呜",
                "createtime": "2024-07-06",
                "updatetime": "2024-07-17",
                "status": "true",
                "account": 150
            },
            ……
        ],
        "total": 5,
        "size": 10,
        "current": 1,
        "orders": [],
        "optimizeCountSql": true,
        "searchCount": true,
        "countId": null,
        "maxLimit": null,
        "pages": 1
    },
    "msg": "success"
}
```



##### 1.3 根据id获取user信息

```
请求类型: GET
请求地址: /api/user/{id}
请求参数: Integer id
返回参数: Result(data为user对象)
	{
    "code": 1,
    "data": [
        {
            "id": 11,
            "name": "Jack",
            "username": "jack707",
            "age": 31,
            "sex": "男",
            "phone": "13000130000",
            "address": "长沙市岳麓区"
        }
    	],
    "msg": "success"
	}
```



##### 1.4 新增用户：

```
请求类型: POST
请求地址: /api/user/add
请求参数: user对象
返回参数: Result
	{
        "code": "200",
        "data": null,
        "msg": "success"
	}
```



##### 1.5 修改用户（注意username即卡号不可修改）

```
请求类型: PUT
请求地址: /api/user/update
请求参数: user对象(id属性必须传递，根据id进行修改)
返回参数: Result
	{
        "code": "200",
        "data": null,
        "msg": "success"
	}	
```



##### 1.6 删除用户

```
请求类型: DELETE
请求地址: /api/user/delete/{id}
请求参数: Integer id
返回参数: Result
	{
        "code": "200",
        "data": null,
        "msg": "success"
	}	
```



##### 1.7  （这里可以加一个user前台登录之后修改密码的功能）

<img src="https://img.picui.cn/free/2024/07/05/6687f3654c0e6.png" alt="image-20240702222147968" style="zoom:67%;" /> （类似这样，功能还没写）



### 2、Admin管理者

##### 2.1 **获取管理者列表**

```
请求类型: GET
请求地址: /api/admin/list
请求参数: 无
返回参数: Result(data为admin对象)
{
    "code": "200",
    "data": [
        {
            "id": 2,
            "username": "玛雅",
            "phone": "15678999523",
            "email": "admin@123.com",
            "password": "123456",
            "createtime": null,
            "updatetime": null
        }
    ],
    "msg": "success"
}
```



##### 2.2**获取分页admin列表**：

```
请求类型: POST
请求地址: /api/admin/page
请求参数: json格式的 adminPageRequest对象
		{
			"pageNum":1,
			"pageSize":10,
			"name":" ",
			"phone":" ",
			"email":" "
		}
返回参数: Result(records为admin对象)
{
    "code": "200",
    "data": {
        "records": [
            {
                "id": 4,
                "name": "张三",
                "phone": "12345239875",
                "email": "admin2@123.com",
                "password": "8aa83139222ee809e2f8ff7c31a13e55",
                "createtime": "2024-07-02",
                "updatetime": "2024-07-16"
            },
            ……
        ],
        "total": 6,
        "size": 10,
        "current": 1,
        "orders": [],
        "optimizeCountSql": true,
        "searchCount": true,
        "countId": null,
        "maxLimit": null,
        "pages": 1
    },
    "msg": "success"
}
```



##### 2.3 根据id获取admin信息

```
请求类型: GET
请求地址: /api/admin/{id}
请求参数: Integer id
返回参数: Result(data为admin对象)
	{
    "code": 1,
    "data": [
         {
            "id": 2,
            "username": "玛雅",
            "phone": "15678999523",
            "email": "admin@123.com",
            "password": "123456",
            "createtime": null,
            "updatetime": null
        }
    	],
    "msg": "success"
	}
```



##### 2.4 新增admin：

```
请求类型: POST
请求地址: /api/admin/add
请求参数: admin对象
返回参数: Result
	{
        "code": "200",
        "data": null,
        "msg": "success"
	}
```



##### 2.5 修改admin（除password之外的修改）

```
请求类型: PUT
请求地址: /api/admin/update
请求参数: admin对象(id属性必须传递，根据id进行修改)
返回参数: Result
	{
        "code": "200",
        "data": null,
        "msg": "success"
	}	
```

##### 2.6 删除用户

```
请求类型: DELETE
请求地址: /api/admin/delete/{id}
请求参数: Integer id
返回参数: Result
	{
        "code": "200",
        "data": null,
        "msg": "success"
	}	
```



##### 2.7 登录管理者

```
请求类型: POST
请求地址: /api/admin/login
请求参数: loginRequest对象
		{
			"name":
			"password":
		}
返回参数: Result(data为adminDTO对象，隐藏掉password)
    {
        "code": "200",
        "data": {
            "id": 2,
            "name": "玛雅",
            "phone": "15678999523",
            "email": "admin@123.com"
        },
        "msg": "success"
    }
```
### 2.8 修改管理者密码
```
请求类型: POST
请求地址: /api/admin/updatePass
请求参数: AdminPass对象
		{
			"id":   //管理者id
			"newPass":
		}
返回参数: Result(data为adminDTO对象，隐藏掉password)
    {
        "code": "200",
        "data": null,
        "msg": "success"
    }
```



### 3、分类Category

##### 3.1 **获取分类列表**

```
请求类型: GET
请求地址: /api/category/list
请求参数: 无
返回参数: Result(data为category对象)
{
    "code": "200",
    "data": [
        {
            "id": 1,
            "name": "文学",
            "remark": "包含各种文学作品",
            "pid": null,
            "createtime": "2024-07-03",
            "updatetime": null
        }
        ……
    ],
    "msg": "success"
}
```



##### 3.2获取分类分页列表：

```
请求类型: POST
请求地址: /api/category/page
请求参数: json格式的 userPageRequest对象
		{
			"pageNum":1,
			"pageSize":10,
			"name":" "
		}
返回参数: Result(records为CategoryPageDTO对象，带有二级分类children属性)
{
    "code": "200",
    "data": {
        "records": [
            {
                "id": 1,
                "name": "文学 · · · · · ·",
                "remark": "该分类包含相关文学作品。",
                "pid": null,
                "createtime": "2024-07-09",
                "updatetime": "2024-07-09",
                "children": [
                    {
                        "id": 2,
                        "name": "小说",
                        "remark": "该分类包含小说类作品。",
                        "pid": 1,
                        "createtime": "2024-07-09",
                        "updatetime": "2024-07-09"
                    },
                    {
                        "id": 4,
                        "name": "外国文学",
                        "remark": "该分类包含外国文学作品。",
                        "pid": 1,
                        "createtime": "2024-07-09",
                        "updatetime": "2024-07-09"
                    },
                    …… 
                ]
            },
            ……
        ],
        "total": 7,
        "size": 10,
        "current": 1,
        "orders": [],
        "optimizeCountSql": true,
        "searchCount": true,
        "countId": null,
        "maxLimit": null,
        "pages": 1
    },
    "msg": "success"
}
```

##### 3.3 根据id获取分类信息

```
请求类型: GET
请求地址: /api/category/{id}
请求参数: Integer id
返回参数: Result(data为category对象)
{
    "code": "200",
    "data": {
        "id": 6,
        "name": "小说",
        "remark": "虚构故事的书籍",
        "pid": 1,
        "createtime": "2024-07-03",
        "updatetime": null
    },
    "msg": "success"
}
```



##### 3.4 新增分类：

```
请求类型: POST
请求地址: /api/category/add
请求参数: categor对象
返回参数: Result
	{
        "code": "200",
        "data": null,
        "msg": "success"
	}
```



##### 3.5 修改分类

```
请求类型: PUT
请求地址: /api/category/update
请求参数: category对象
返回参数: Result
	{
        "code": "200",
        "data": null,
        "msg": "success"
	}	
```



##### 3.6 删除分类

```
请求类型: DELETE
请求地址: /api/category/delete/{id}
请求参数: Integer id
返回参数: Result
	{
        "code": "200",
        "data": null,
        "msg": "success"
	}	
```

##### 3.7 获取分类树
```
请求类型: GET
请求地址: /api/category/tree
请求参数: null
返回参数: Result
{
    "code": "200",
    "data": [
        {
            "id": 1,
            "name": "文学 · · · · · ·",
            "remark": "该分类包含相关文学作品。",
            "pid": null,
            "createtime": "2024-07-09",
            "updatetime": "2024-07-09",
            "children": [
                {
                    "id": 2,
                    "name": "小说",
                    "remark": "该分类包含小说类作品。",
                    "pid": 1,
                    "createtime": "2024-07-09",
                    "updatetime": "2024-07-09"
                },
                {
                    "id": 4,
                    "name": "外国文学",
                    "remark": "该分类包含外国文学作品。",
                    "pid": 1,
                    "createtime": "2024-07-09",
                    "updatetime": "2024-07-09"
                },
                ……
            ]
        },
        ……
    ],
    "msg": "success"
}
```


### 4、图书book

##### 4.1 **获取图书列表**

```
请求类型: GET
请求地址: /api/book/list
请求参数: 无
返回参数: Result(data为book对象)
{
    "code": "200",
    "data": [
       {
       	……
       }
    ],
    "msg": "success"
}
```



##### 4.2获取图书分页列表：

```
请求类型: POST
请求地址: /api/book/page
请求参数: json格式的 bookPageRequest对象
		{
			"pageNum":1,
			"pageSize":10,
			"title":" ",
			"isbn":" "
		}
返回参数: Result(records为book对象)
{
    "code": "200",
    "data": [
        {
            ……
        }
    ],
    "msg": "success"
}
```



##### 4.3 根据id获取图书信息

```
请求类型: GET
请求地址: /api/book/{id}
请求参数: Integer id
返回参数: Result(data为book对象)
{
    "code": "200",
    "data": {
        ……
    },
    "msg": "success"
}
```



##### 4.4 新增图书：

```
请求类型: POST
请求地址: /api/book/add
请求参数: bookDTO对象
返回参数: Result
	{
        "code": "200",
        "data": null,
        "msg": "success"
	}
```



##### 4.5 修改图书

```
请求类型: PUT
请求地址: /api/book/update
请求参数: bookDTO对象
返回参数: Result
	{
        "code": "200",
        "data": null,
        "msg": "success"
	}	
```



##### 4.6 删除图书

```
请求类型: DELETE
请求地址: /api/book/delete/{id}
请求参数: Integer id
返回参数: Result
	{
        "code": "200",
        "data": null,
        "msg": "success"
	}	
```

### 5. 借书Controller


##### 5.1 **获取借阅列表**

```
请求类型: GET
请求地址: /api/borrow/list
请求参数: 无
返回参数: Result(data为borrow对象)
{
    "code": "200",
    "data": [
       {
       	……
       }
    ],
    "msg": "success"
}
```



##### 5.2获取borrow分页列表：

```
请求类型: POST
请求地址: /api/borrow/page
请求参数: json格式的 borrowPageRequest对象
		{
			"pageNum":1,
			"pageSize":10,
			"title":" ",    //图书名
			"name":" "      //用户名
		}
返回参数: Result(records为borrow对象)
{
    "code": "200",
    "data": [
        {
            ……
        }
    ],
    "msg": "success"
}
```



##### 5.3 根据id获取borrow信息

```
请求类型: GET
请求地址: /api/borrow/{id}
请求参数: Integer id
返回参数: Result(data为borrow对象)
{
    "code": "200",
    "data": {
        ……
    },
    "msg": "success"
}
```



##### 5.4 新增borrow：

```
请求类型: POST
请求地址: /api/borrow/add
请求参数: borrow对象
返回参数: Result
	{
        "code": "200",
        "data": null,
        "msg": "success"
	}
```



##### 5.5 删除borrow
```
请求类型: DELETE
请求地址: /api/borrow/delete/{id}
请求参数: Integer id
返回参数: Result
	{
        "code": "200",
        "data": null,
        "msg": "success"
	}	
```


##### 5.6 修改borrow状态为借阅中

```
请求类型: PUT
请求地址: /api/borrow/changeStatusYes/{id}
请求参数: Integer id
返回参数: Result
	{
        "code": "200",
        "data": null,
        "msg": "success"
	}	
```


##### 5.6 修改borrow状态为审核不通过

```
请求类型: PUT
请求地址: /api/borrow/changeStatusNo/{id}
请求参数: Integer id
返回参数: Result
	{
        "code": "200",
        "data": null,
        "msg": "success"
	}	
```

### 6. Message留言

##### 6.1 获取所有留言
```
请求类型: GET
请求地址: /api/message/list
请求参数: 无
返回参数: Result
{
    "code": "200",
    "data": [
        {
            "id": 2,
            "userId": 27,
            "title": "借书",
            "content": "《我的阿勒泰》什么时候可以补充库存呢",
            "status": "1",
            "createtime": "2024-07-21"
        },
        {
            "id": 4,
            "userId": 27,
            "title": "积分",
            "content": "我的积分余额不足，请问怎么补充呢？",
            "status": "1",
            "createtime": "2024-07-22"
        }
    ],
    "msg": "success"
}
```

##### 6.2 根据用户id分页查询其留言
```
请求类型: POST
请求地址: /api/message/page
请求参数: MessagePageRequest
{
    "userId": //用户id
    "pageNum"
    "pageSize"
}
返回参数: Result
{
    "code": "200",
    "data": {
        "records": [
            {
                "id": 2,
                "userId": 27,
                "title": "借书",
                "content": "《我的阿勒泰》什么时候可以补充库存呢",
                "status": "1",
                "createtime": "2024-07-21"
            },
            {
                "id": 4,
                "userId": 27,
                "title": "积分",
                "content": "我的积分余额不足，请问怎么补充呢？",
                "status": "1",
                "createtime": "2024-07-22"
            }
        ],
        "total": 2,
        "size": 10,
        "current": 1,
        "orders": [],
        "optimizeCountSql": true,
        "searchCount": true,
        "countId": null,
        "maxLimit": null,
        "pages": 1
    },
    "msg": "success"
}
```

##### 6.3 新增留言记录
```
请求类型: POST
请求地址: /api/message/add
请求参数: message对象
{
    "userId":   //用户id
    "title":
    "content":
}
返回参数: Result
	{
        "code": "200",
        "data": null,
        "msg": "success"
	}
```

##### 6.4 根据留言id 查询回复信息
```
请求类型: POST
请求地址: /api/message/isReply/{id}
请求参数: id    //该留言的主键id
返回参数: Result
{
    "code": "200",
    "data": "近期将会上架，请耐心等待",
    "msg": "success"
}
or
{
    "code": "200",
    "data": "该留言暂未回复",
    "msg": "success"
}
```

##### 6.5 admin回复留言
```
请求类型: POST
请求地址: /api/message/replyMessage
请求参数: reply对象
{
    ”messageId“:    //所回复的留言id
    "adminId":  //这个参数嫌麻烦可以直接传null
    "content":
}

返回参数: Result
{
    "code": "200",
    "data": null,
    "msg": "success"
}
```